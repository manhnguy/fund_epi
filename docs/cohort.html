<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Fundamental Epidemiological Study Designs - 9&nbsp; Cohort study</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./case_control.html" rel="next">
<link href="./cross_sectional.html" rel="prev">
<link href="./images/profile.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./cross_sectional.html">Study designs</a></li><li class="breadcrumb-item"><a href="./cohort.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Cohort study</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fundamental Epidemiological Study Designs</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Basic concepts</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./epi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Fundamental epidemiology</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./occurrence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Measures of Occurrence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./measures_effect.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Measures of Effect/Association</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bias.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Bias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./con_effect_modification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Confounders and Effect Modification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./error.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Measurement Errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./study_design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Study design</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Study designs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cross_sectional.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Cross-sectional study</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cohort.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Cohort study</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./case_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Case-control study</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intervention.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Intervention study</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#design-and-why-do-cohort-study" id="toc-design-and-why-do-cohort-study" class="nav-link active" data-scroll-target="#design-and-why-do-cohort-study"><span class="header-section-number">9.1</span> Design and why do Cohort study?</a></li>
  <li><a href="#main-steps-in-conducting-a-cohort-study" id="toc-main-steps-in-conducting-a-cohort-study" class="nav-link" data-scroll-target="#main-steps-in-conducting-a-cohort-study"><span class="header-section-number">9.2</span> Main steps in conducting a Cohort study</a></li>
  <li><a href="#strength-and-weakness" id="toc-strength-and-weakness" class="nav-link" data-scroll-target="#strength-and-weakness"><span class="header-section-number">9.3</span> Strength and Weakness</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Cohort study</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="design-and-why-do-cohort-study" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="design-and-why-do-cohort-study"><span class="header-section-number">9.1</span> Design and why do Cohort study?</h2>
<p><strong>Design</strong></p>
<p>The starting point for cohort study is the exposure to the risk factor.</p>
<p><strong>Descriptive study</strong>: We select a group of participants who have experienced an exposure of interest, and follow them over a period of time to determine the incidence of one or more outcomes. Sometimes the participants of a descriptive cohort study are people who have the early stages of a disease, and are followed to observe the course of the disease over time (natural history of disease studies).</p>
<p><strong>Analytic study</strong>: We test the association between an exposure and an outcome. Study participants are classified as exposed or unexposed to the risk factor of interest and then followed over a period of time to see whether they develop one or more outcomes. We then compare the frequency of the outcome of interest among the group that was exposed to the risk factor with the group that was unexposed</p>
<p><strong>Why do Cohort study?</strong></p>
<ul>
<li><p>Cohort studies are particularly useful for rare exposures and in situations where we are interested in more than one outcome.</p></li>
<li><p>Because exposure status is defined at the start of the study, before the outcome is assessed, the temporal sequence of events can be investigated.</p></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Difference between Cohort and Case-control study</strong></p>
<p><strong>Cohort study</strong>: We have exposure data on all those in the study population who develop the outcome, and all those who do not.</p>
<p><strong>Case-control study</strong>: we collect exposure data on all cases and controls. However, the controls are only a sub-set of the study population of “non-cases” rather than all non-cases in the study population.</p>
</div>
</div>
</section>
<section id="main-steps-in-conducting-a-cohort-study" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="main-steps-in-conducting-a-cohort-study"><span class="header-section-number">9.2</span> Main steps in conducting a Cohort study</h2>
<p><strong>Step 1: Defining the study question</strong></p>
<p><strong>Step 2: Defining the target population and selecting the study population</strong></p>
<p>The study population should be free of outcome at the start of the the study</p>
<p><strong>a Common exposure</strong> We can select a population of people and classify each individual, at the start of the study, as exposed or unexposed. We then follow up the exposed and unexposed groups to determine the frequency of the outcome in each exposure group.</p>
<p>This is called using an internal comparison group because we compare the exposed to the unexposed within the same population.</p>
<p><strong>b Rare exposure</strong> A sample of the general population is unlikely to include enough people who have been exposed. In this case we need to select a group of people who are known to have been exposed, and then choose a suitable comparison group.</p>
<ul>
<li><p>internal comparison group: we may able to use unexposed group in the same population. The exposed and unexposed groups will likely be comparable. Work-force cohorts are a popular cohort design. However, these cohorts are generally not representative of the general population. All workforces differ from the general population because they are healthy enough to be in work, and some work cohorts (such as doctors or nurses) are likely to be better educated and more health-conscious than the general population. In an analytic cohort study, it is not essential that the study population is representative of the general population. We refer to the extent to which our results can be generalised to other populations as external validity (or generalisability).</p></li>
<li><p>external comparison group: If all individuals in the study population have some degree of the exposure, we may need to use unexposed group from different population. We need to be more careful that our exposed and unexposed groups are comparable, except with respect to the exposure of interest. If the exposed and unexposed groups are not comparable this would threaten the internal validity of our study.</p></li>
</ul>
<p>Sometimes we may decide to use more than one unexposed comparison group and compare the exposed group with each unexposed group.</p>
<p><strong>Step 3: Measuring exposure</strong></p>
<p>Accurate measurement of exposure and classification of exposure status is important. Several data source can be used to measure the exposure:</p>
<ul>
<li><p>interviews with study participants</p></li>
<li><p>medical records</p></li>
<li><p>employment records</p></li>
<li><p>biological specimens</p></li>
</ul>
<p>Exposure is often a continuous variable, we can stratify a continuous variable into categorical variable. However, it is better to collect the exact values and stratify in the analysis step.</p>
<p>If we use external comparison group, we need to be sure that the unexposed group is genuinely exposed to the exposure of interest.</p>
<p>The exposure can change during the follow up and we need to use special analytical techniques to take account of this changes.</p>
<p>We also need to measure potential confounding factors at the start of the study.</p>
<p>Cohort studies can be prospective (also called concurrent) or historical (also called retrospective). This refers to the time at which exposure data were measured.</p>
<p><strong>Historical cohort study</strong></p>
<p>Advantage: much faster to perform, useful for diseases with a long period between exposure and outcome</p>
<p>Disadvantage: data on exposure (and potential confounders) may be less accurate. Most of the time, data have been collected for different purposes.</p>
<p><strong>Prospective cohort study</strong></p>
<p>Advantage: data can be collected with more accurate and complete focus on the objectives of the study.</p>
<p>Disadvantage: It can take long time to complete the study and if losses to follow up is large and there is difference between loss to follow up witht the group that complete follow up, selection bias may be introduced.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Although historical cohort studies are often referred to as retrospective cohort studies, we prefer to avoid this term as we believe it can be confusing. Conceptually, all cohort studies are prospective because they look forward in time from exposure to disease. This is in contrast with case control studies which are sometimes referred to as retrospective studies because they look back in time from disease to exposure. The key point to remember is that regardless of whether we are using historical data or real time data, in cohort studies the exposure status is always recorded before the outcome.</p>
</div>
</div>
<p><strong>Step 4: Follow-up of participants</strong></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Incomplete follow-up is the main potential weakness of cohort studies.</p>
</div>
</div>
<p>Minimise losses to follow up by regular interviews, face-to-face or by telephone, or postal questionnaires, and possibly a back-up system for tracing participants who do not respond.</p>
<p>We should consider latency time when design a cohort study. If the latency time is too long (many years), we may consider historical cohort study.</p>
<p><strong>Step 5: Ascertaining outcome</strong></p>
<p><strong>Step 6: Analysing data</strong></p>
<p>Risks are useful when the follow-up time is identical (or nearly identical) for all members of the cohort. However, if there is wide variation between study participants in the duration of follow-up, we must take this into account. In this situation, it would be better to calculate a rate.</p>
<p>For analytical cohort study, we use risk/rate ratio/difference to compare the 2 groups.</p>
<p>If there are more than 2 levels of the exposure, we need to choose a level as a baseline that we use to compare with other levels. This baseline level is usually one of the least or no exposure. <strong>If there are few events in this group (very small number), we need to choose another level as baseline as the CI will be wide.</strong></p>
<p>Note about the changes in exposure.</p>
<p><strong>Step 7: Interpreting results</strong></p>
<p><img src="images/association.jpg" class="img-fluid"></p>
<p><strong>Bias</strong></p>
<p>1 Selection bias:</p>
<ul>
<li><p>if the unexposed group is not correctly selected</p></li>
<li><p>if there is differential loss to follow-up between exposure groups</p></li>
</ul>
<p>2 Information bias:</p>
<p>Observer bias:</p>
<ul>
<li><p>If the researcher knows about the exposure status, s/he might mis-stratify the outcome.</p></li>
<li><p>If the participants know about the study question, s/he might report inaccurate outcome.</p></li>
</ul>
<p>These problems can be minimised by having a strict case definition for the outcome of interest, by using objective measures. We can also try to blind person who carry out diagnosis the outcome to the exposure status of the participant and blind the participants about the hypothesis under the study (concern about ethic)</p>
<p><strong>Confounding</strong></p>
<p>As all observational studies, we should collect all information on potential confounders together with the exposure of interest at the start of the study.</p>
<p><strong>Random errors</strong></p>
</section>
<section id="strength-and-weakness" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="strength-and-weakness"><span class="header-section-number">9.3</span> Strength and Weakness</h2>
<p><strong>Strength</strong></p>
<ul>
<li><p>exposure is measured at the start of the study, before the outcome occurs, and so measurement of exposure is not biased by the presence or absence of the outcome</p></li>
<li><p>the time sequence of events should be clear in a cohort study, minimising the possibility of reverse causality</p></li>
<li><p>cohort studies can provide data on the time course of the development of the outcome(s), including late effects.</p></li>
<li><p>more than one outcome can be examined at once</p></li>
<li><p>rare exposures can be investigated using appropriately selected populations.</p></li>
</ul>
<p><strong>Weekness</strong></p>
<ul>
<li><p>prospective cohorts are slow and potentially expensive if there is a long period between exposure and outcome (long latency)</p></li>
<li><p>historical cohort studies depend upon pre-existing records of exposure being available, and being reliable</p></li>
<li><p>they are inefficient for rare diseases (unless the attributable fraction is very high)</p></li>
<li><p>exposure status may change during study (in which case it may need to be determined again at intervals throughout the study)</p></li>
<li><p>differential loss to follow-up may introduce bias: <strong>this is a particular problem when follow-up is of long duration</strong></p></li>
<li><p>in long term cohort studies, it may be hard to ensure that diagnostic criteria remain consistent throughout the study, particularly if outcomes are ascertained from routine data sources.</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="manhnguy/fund_epi" data-repo-id="R_kgDOOLlxVA" data-category="General" data-category-id="DIC_kwDOOLlxVM4CoWUv" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./cross_sectional.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Cross-sectional study</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./case_control.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Case-control study</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>